---
title:  "Spring 공부하기 - 실습 [2]"
excerpt: "AppConfig를 스프링으로 전환하기, 컴포넌트 스캔 사용"
date:   2021-10-09 20:33:00 +0900
header:
  teaser: /assets/images/spring.png

categories: javaSpring
tags:
  - Java
  - Spring
last_modified_at: 2021-10-09T20:33:00-05:00



---

<br/>

<br/>

[스프링 핵심 원리 기본편](https://www.inflearn.com/course/스프링-핵심-원리-기본편)를 보고 대부분 공부하고 정리한 내용을 올립니다

<br/>

<br/>

#### AppConfig를 스프링을 사용하여 변경하기

<script src="https://gist.github.com/ShinDongHun1/094daf07381198b26aa0eb0915fb5715.js"></script>

@Configuration : 구성 정보라는것을 표시

@Bean: 스프링 컨테이너에 등록됨

<br/>

사용은 

```java
ApplicationContext ac  = new AnnotationConfigApplicationContext(AppConfig.class);

MemberService memberService = ac.getBean("memberService", MemberService.class);
```

#### 스프링 컨테이너

- ApplicationContext를 스프링 컨테이너라 한다.
- 기존에는 우리가  직접 AppConfig를 사용하였지만, 이제부터는 스프링 컨테이너를 통해서 사용한다.
- 스프링 컨테이너는 @Configuration이 붙은 AppConfig를 설정정보로 사용한다. 여기서 @Bean이라 적힌 메서드를 모두 호출해서 반환한 객체를 스프링 컨테이너에 등록한다. 이렇게 스프링 컨테이너에 등록된 객체를 스프링 빈이라 한다.

<br/>

<br/>

### 💡 컴포넌트 스캔 사용하기

<br/>

#### AppConfig 바꾸기

<script src="https://gist.github.com/ShinDongHun1/1ecc5a5a36d489686182a9bc1dd1fa4e.js"></script>

<br/>

#### 💻MemoryMemberRepository .java

<script src="https://gist.github.com/ShinDongHun1/8f0edeadc28e488a20604fc5e2aa0f79.js"></script>

이런식으로 FixDiscountPolicy와 RateDiscountPolicy에도 설정해주자.

<br/>

#### 💻MemberServiceImpl.java

<script src="https://gist.github.com/ShinDongHun1/a1318c0ba36166157cfe06482ce03a1b.js"></script>

@Autowired를 통해 자동으로 의존관계가 주입된다.

<br/>

#### 💻OrderServiceImpl.java

<script src="https://gist.github.com/ShinDongHun1/b716f178e6ae99ed4cbbf6e120e3a83b.js"></script>

<br/>

#### 사용

```java
ApplicationContext ac  = new AnnotationConfigApplicationContext(AppConfig.class);
MemberService memberService = ac.getBean("memberService", MemberService.class);
```

<br/>

<br/>

### 💡Filter 사용하기

#### MyIncludeComponent 

<script src="https://gist.github.com/ShinDongHun1/d6d884adbfbf815f0ae8ad158d4c146b.js"></script>

#### BeanA

<br/>

<script src="https://gist.github.com/ShinDongHun1/d5d60ccb92934b5a8445c46d0ab35bec.js"></script>

다음과 같이 내가 만든 어노테이션을 적용한 후

<br/>

<script src="https://gist.github.com/ShinDongHun1/06ada20bedd48fbf77d628d5c65bd8a8.js"></script>

컴포넌트 스캔에 includeFilters 속성에 다음과 같이 설정해주면 된다.

참고로 제외하려면 excludeFilters 속성에 추가해주면 된다.