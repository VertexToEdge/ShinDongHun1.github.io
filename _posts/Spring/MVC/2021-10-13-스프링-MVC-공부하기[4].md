---
title:  "스프링 MVC 공부하기[4]"
excerpt: "스프링 MVC 구조"
date:   2021-10-13 17:30:00 +0900
header:
  teaser: /assets/images/spring.png

categories: MVC
tags:
  - Java
  - Spring
  - MVC
last_modified_at: 2021-10-13T17:30:00-05:00
---

<br/>

[스프링 MVC 1편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1/dashboard)를 보고 공부하고 정리한 내용을 올립니다

<br/>

## 💡 스프링 MVC 구조

<br/>

##### [스프링 MVC 실습 4- 프론트 컨트롤러 사용](https://shindonghun1.github.io/mvc/%EC%8A%A4%ED%94%84%EB%A7%81-MVC-%EC%8B%A4%EC%8A%B5-4/)에서 만들었던 구조

![image-20211013154142603](C:/Users/huipu/AppData/Roaming/Typora/typora-user-images/image-20211013154142603.png)

<br/>

##### 스프링 MVC 구조

![image-20211013154303324](C:/Users/huipu/AppData/Roaming/Typora/typora-user-images/image-20211013154303324.png)

DispatcherServlet : 프론트 컨트롤러

<br/>

#### ✏️DispatcherServlet

스프링 MVC도 프론트 컨트롤러 패턴으로 구현.

스프링 MVC의 프론트 컨트롤러가 DispatcherServlet이다.

<br/>

##### 등록

- DispatcherServlet도 부모 클래스에서 HttpServlet을 상속 받아서 사용한다.
- 스프링부트는 DispatcherServlet을 서블릿으로 자동 등록하면서, **모든 경로**에 대해서 매핑한다

<script src="https://gist.github.com/ShinDongHun1/e794ee8c48999af2e59b5da5dd5dea90.js"></script>

<br/>

<br/>

### 💡 스프링 부트가 자동 등록하는 핸들러 매핑과 핸들러 어댑터

#### ✏️HandlerMapping

> 0 = RequestMappingHandlerMapping : 애노테이션 기반의 컨트롤러인 @RequestMapping에서 사용 
>
> 1 = BeanNameUrlHandlerMapping : 스프링 빈의 이름으로 핸들러를 찾는다.

<br/>

#### ✏️HandlerAdapter

> 0 = RequestMappingHandlerAdapter : 애노테이션 기반의 컨트롤러인 @RequestMapping에서 사용 
>
> 1 = HttpRequestHandlerAdapter : HttpRequestHandler 처리 
>
> 2 = SimpleControllerHandlerAdapter : Controller 인터페이스(애노테이션X, 과거에 사용) 처리

<br/>

<br/>

### 💡 뷰 리졸버

##### 스프링 부트는 InternalResourceViewResolver 라는 뷰 리졸버를 자동으로 등록하는데, 이때 application.properties 에 등록한 spring.mvc.view.prefix , spring.mvc.view.suffix 설정 정보를 사용해서 등록한다.

```
spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp
```

<br/>

#### 스프링 부트가 자동 등록하는 뷰 리졸버

> 1 = BeanNameViewResolver : 빈 이름으로 뷰를 찾아서 반환한다. (예: 엑셀 파일 생성 기능에 사용) 
>
> 2 = InternalResourceViewResolver : JSP를 처리할 수 있는 뷰를 반환한다.

<br/>

<br/>

## 💡 @RequestMapping

스프링은 애노테이션을 활용한 매우 유연하고, 실용적인 컨트롤러를 만들었는데 이것이 바로 @RequestMapping 애노테이션을 사용하는 컨트롤러이다.

앞서 보았듯이 가장 우선순위가 높은 핸들러 매핑과 핸들러 어댑터는 RequestMappingHandlerMapping , RequestMappingHandlerAdapter 이다. 

@RequestMapping 의 앞글자를 따서 만든 이름인데, 이것이 바로 지금 스프링에서 주로 사용하는 애노테이션 기반의 컨트롤러를 지원하는 핸들러 매핑과 어댑터이다. 

##### 실무에서는 99.9% 이 방식의 컨트롤러를 사용한다.

<br/>

<script src="https://gist.github.com/ShinDongHun1/76801cdad7d5e19095c4652f0cb4b173.js"></script>

- ##### @Controller : 스프링이 자동으로 스프링 빈으로 등록한다. (내부에 @Component 애노테이션이 있어서 컴포넌트 스캔의 대상이 됨) 스프링 MVC에서 애노테이션 기반 컨트롤러로 인식한다. 

- ##### @RequestMapping : 요청 정보를 매핑한다. 해당 URL이 호출되면 이 메서드가 호출된다. 애노테이션을 기반으로 동작하기 때문에, 메서드의 이름은 임의로 지으면 된다. 

- ##### ModelAndView : 모델과 뷰 정보를 담아서 반환하면 된다.

<br/>

**RequestMappingHandlerMapping** 은 스프링 빈 중에서 **@RequestMapping 또는 @Controller** 가 **클래스 레벨**에 붙어 있는 경우에 **매핑 정보로 인식**한다. 따라서 다음 코드도 동일하게 동작한다

<script src="https://gist.github.com/ShinDongHun1/b01ea8fa1a9960dab41117bc5e4b51da.js"></script>

<br/>

컴포넌트 스캔 없이 다음과 같이 스프링 빈으로 직접 등록해도 된다.

<script src="https://gist.github.com/ShinDongHun1/60ca77c60f09d217d76d91a235e1f2b5.js"></script>

<br/>

<br/>

## 🧾 정리

#### **✏** DispatcherServlet : 스프링 MVC의 프론트 컨트롤러

<br/>

#### **✏**  스프링 부트가 자동 등록하는 핸들러 매핑과 핸들러 어댑터

- ##### HandlerMapping

> 0 = RequestMappingHandlerMapping : 애노테이션 기반의 컨트롤러인 @RequestMapping에서 사용 
>
> 1 = BeanNameUrlHandlerMapping : 스프링 빈의 이름으로 핸들러를 찾는다.

- ##### HandlerAdapter

> 0 = RequestMappingHandlerAdapter : 애노테이션 기반의 컨트롤러인 @RequestMapping에서 사용 
>
> 1 = HttpRequestHandlerAdapter : HttpRequestHandler 처리 
>
> 2 = SimpleControllerHandlerAdapter : Controller 인터페이스(애노테이션X, 과거에 사용) 처리