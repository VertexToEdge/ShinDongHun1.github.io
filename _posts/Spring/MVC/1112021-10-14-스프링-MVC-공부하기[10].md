---
title:  "스프링 MVC 공부하기[10]"
excerpt: "11111    Validation"
date:   1112021-10-14 15:50:00
header:
  teaser: /assets/images/spring.png

categories: MVC
tags:
  - Java
  - Spring
  - MVC
last_modified_at: 2021-10-14T15:50:00


---

<br/>

[스프링 MVC 2편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-2/dashboard)를 보고 공부하고 정리한 내용을 올립니다

<br/>

## 💡 검증

시작하기에 앞서, 서버에서 굳이 검증을 할 필요가 있을까에 대해서 생각해보자. 

<br/>

#### 클라이언트 검증과 서버 검증

- 클라이언트 검증은 조작할 수 있으므로 보안에 취약하다.
- 서버만으로 검증하면, 즉각적인 고객 사용성이 부족해진다.
- 둘을 적절히 섞어서 사용하되, 최종적으로 서버 검증은 필수
- API 방식을 사용하면 API 스펙을 잘 정의해서 검증 오류를 API 응답 결과에 잘 남겨주어야 함

내가 예전에 참고했던 영상

[유튜브 - [10분 테코톡] 👩🏻‍💻👨🏻‍💻해리&션의 MVC 패턴](https://www.youtube.com/watch?v=uoVNJkyXX0I&t=339s)

<br/>

<br/>

## 💡 @Validation

##### Bean Validation을 사용하려면 다음 의존관계를 추가해야 한다.

##### build.gradle

`implementation 'org.springframework.boot:spring-boot-starter-validation'`

<br/>

<br/>

## 💡 @Valid , @Validated

Valid는 자바 표준으로 javax에 속해있으며, 사용하려면 build.gradle 에 의존관계를 추가해주어야 한다.

##### implementation 'org.springframework.boot:spring-boot-starter-validation'

<br/>

@Validated는 스프링 전용 검증 애노테이션이고, @Valid는 자바 표준 검증 애노테이션이다. 

작동은 동일하게 하지만 @Validated는 내부에 **groups**라는 기능을 포함하고 있다.

<br/>

<br/>

#### 바인딩에 성공한 필드만 Bean Valiation 적용

타입 변환에 성공하여야 검증이 의미있지, 애당초 들어오는 타입 값이 잘못되었으면 TypeMismatch로 FieldError를 추가한다.

<br/>

<br/>

## 💡 에러 코드

Bean Validation이 기본으로 제공하는 오류 메시지를 좀 더 자세히 변경하고 싶으면 어떻게 하면 될까?

##### @NotBlank

`NotBlank.item.itemName`
`NotBlank.itemName`
`NotBlank.java.lang.String`
`NotBlank`

위와같이 생성되며,

<br/>

##### @Range

Range.item.price
Range.price
Range.java.lang.Integer
Range

위와같이 생성된다.

우리는 그저 해당 오류들에 대한 메시지만 적용해 놓으면 된다.

<br/>

##### 스프링 부트 메시지 설정 추가

##### application.properties

> ##### spring.messages.basename=messages,errors

<br/>

##### errors.properties

> #Bean Validation 추가
>
> NotBlank={0} 공백X
> Range={0}, {2} ~ {1} 허용
> Max={0}, 최대 {1}

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

## 🧾 정리

#### ✏️  

