---
title:  "μ¤ν”„λ§ MVC κ³µλ¶€ν•κΈ°[16]"
excerpt: "μ„λΈ”λ¦Ώ μμ™Έ μ²λ¦¬ -ν•„ν„°. μΈν„°μ…‰ν„° , DispatchType"
date:   2021-10-18 01:01:00
header:
  teaser: /assets/images/spring.png

categories: MVC
tags:
  - Java
  - Spring
  - MVC
last_modified_at: 2021-10-18T01:01:00

---

<br/>

[μ¤ν”„λ§ MVC 2νΈ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-2/dashboard)λ¥Ό λ³΄κ³  κ³µλ¶€ν•κ³  μ •λ¦¬ν• λ‚΄μ©μ„ μ¬λ¦½λ‹λ‹¤

<br/>

## π’΅ μ„λΈ”λ¦Ώ μμ™Έ μ²λ¦¬ - ν•„ν„°

##### μμ™Έ λ°μƒκ³Ό μ¤λ¥ νμ΄μ§€ μ”μ²­ νλ¦„

> 1. ##### WAS(μ—¬κΈ°κΉμ§€ μ „ν) <- ν•„ν„° <- μ„λΈ”λ¦Ώ <- μΈν„°μ…‰ν„° <- μ»¨νΈλ΅¤λ¬(μμ™Έλ°μƒ)
>
> 2. ##### WAS `/error-page/500` λ‹¤μ‹ μ”μ²­ -> ν•„ν„° -> μ„λΈ”λ¦Ώ -> μΈν„°μ…‰ν„° -> μ»¨νΈλ΅¤λ¬(/errorpage/500) -> View

<br/>

μ¤λ¥κ°€ λ°μƒν•λ©΄ μ¤λ¥ νμ΄μ§€λ¥Ό μ¶λ ¥ν•κΈ° μ„ν•΄ WAS λ‚΄λ¶€μ—μ„ λ‹¤μ‹ ν• λ² νΈμ¶μ΄ λ°μƒν•λ‹¤. μ΄λ• ν•„ν„°, μ„λΈ”λ¦Ώ, μΈν„°μ…‰ν„°λ„ λ¨λ‘ λ‹¤μ‹ νΈμ¶λλ‹¤. κ·Έλ°λ° λ΅κ·ΈμΈ μΈμ¦ μ²΄ν¬ κ°™μ€ κ²½μ°λ¥Ό μƒκ°ν•΄λ³΄λ©΄, μ΄λ―Έ ν• λ² ν•„ν„°λ‚, μΈν„°μ…‰ν„°μ—μ„ λ΅κ·ΈμΈ μ²΄ν¬λ¥Ό μ™„λ£ν–λ‹¤. λ”°λΌμ„ μ„λ²„ λ‚΄λ¶€μ—μ„ μ¤λ¥ νμ΄μ§€λ¥Ό νΈμ¶ν•λ‹¤κ³  ν•΄μ„ ν•΄λ‹Ή ν•„ν„°λ‚ μΈν„°μ…‰νΈκ°€ ν•λ² λ” νΈμ¶λλ” κ²ƒμ€ λ§¤μ° λΉ„ν¨μ¨μ μ΄λ‹¤.

κ²°κµ­ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°μƒν• μ •μƒ μ”μ²­μΈμ§€, μ•„λ‹λ©΄ μ¤λ¥ νμ΄μ§€λ¥Ό μ¶λ ¥ν•κΈ° μ„ν• λ‚΄λ¶€ μ”μ²­μΈμ§€ κµ¬λ¶„ν•  μ μμ–΄μ•Ό ν•λ‹¤. 

##### μ„λΈ”λ¦Ώμ€ μ΄λ° λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ **DispatchType**μ΄λΌλ” **μ¶”κ°€ μ •λ³΄**λ¥Ό μ κ³µν•λ‹¤.

<br/>

<br/>

### π DispatcherType

##### ν•„ν„°λ” μ΄λ° κ²½μ°λ¥Ό μ„ν•΄μ„ dispatcherTypeμ΄λΌλ” μµμ…μ„ μ¤€λΉ„ν–λ‹¤.

##### κ³ κ°μ΄ μ²μ μ”μ²­ν•λ©΄ dispatcherType=REQUESTμ΄λ‹¤.

μ΄λ ‡λ“― μ„λΈ”λ¦Ώ μ¤ν™μ€ μ‹¤μ  κ³ κ°μ΄ μ”μ²­ν• κ²ƒμΈμ§€, μ„λ²„κ°€ λ‚΄λ¶€μ—μ„ μ¤λ¥ νμ΄μ§€λ¥Ό μ”μ²­ν•λ” κ²ƒμΈμ§€ DispatcherTypeμΌλ΅ κµ¬λ¶„ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ‹¤.

<br/>

#### π” javax.servlet.DispatcherType

```java
public enum DispatcherType {
	FORWARD,
	INCLUDE,
	REQUEST,
	ASYNC,
	ERROR
}
```

<br/>

##### β DispatcherType

- ##### <span style="color:orange">REQUEST</span> : ν΄λΌμ΄μ–ΈνΈ μ”μ²­

- ##### <span style="color:orange">ERROR </span>: μ¤λ¥ μ”μ²­

- FORWARD : μ„λΈ”λ¦Ώμ—μ„ λ‹¤λ¥Έ μ„λΈ”λ¦Ώμ΄λ‚ JSPλ¥Ό νΈμ¶ν•  λ•

- INCLUDE : μ„λΈ”λ¦Ώμ—μ„ λ‹¤λ¥Έ μ„λΈ”λ¦Ώμ΄λ‚ JSPμ κ²°κ³Όλ¥Ό ν¬ν•¨ν•  λ•

- ASYNC : μ„λΈ”λ¦Ώ λΉ„λ™κΈ° νΈμ¶

<br/>

<br/>

### π’΅ μ¤λ¥ νμ΄μ§€ μ”μ²­μ‹μ—λ„ ν•„ν„°λ¥Ό νΈμ¶ν•λ” λ°©λ²•

<script src="https://gist.github.com/ShinDongHun1/d5d97ffd6b4bf31664343df6c3c99cf7.js"></script>

```java
filterRegistrationBean.setDispatcherTypes(DispatcherType.REQUEST,DispatcherType.ERROR);
```

μ΄λ ‡κ² λ‘ κ°€μ§€λ¥Ό λ¨λ‘ λ„£μΌλ©΄ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ€ λ¬Όλ΅ μ΄κ³ , μ¤λ¥ νμ΄μ§€ μ”μ²­μ‹μ—λ„ ν•„ν„°κ°€ νΈμ¶λλ‹¤.

μ•„λ¬΄κ²ƒλ„ λ„£μ§€ μ•μΌλ©΄ κΈ°λ³Έκ°’μ€ DispatcherType.REQUESTμ΄λ‹¤. μ¦‰ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ΄ μλ” κ²½μ°μ—λ§ ν•„ν„°κ°€ μ μ©λλ‹¤. 

<br/>

<br/>

### π’΅ μ„λΈ”λ¦Ώ μμ™Έ μ²λ¦¬ - μΈν„°μ…‰ν„°

μΈν„°μ…‰ν„°λ” μ„λΈ”λ¦Ώμ΄ μ κ³µν•λ” κΈ°λ¥μ΄ μ•„λ‹λΌ μ¤ν”„λ§μ΄ μ κ³µν•λ” κΈ°λ¥μ΄λ‹¤. 

##### λ”°λΌμ„ DispatcherType κ³Ό λ¬΄κ΄€ν•κ² ν•­μƒ νΈμ¶λλ‹¤.

λ€μ‹ μ— μΈν„°μ…‰ν„°λ” λ‹¤μκ³Ό κ°™μ΄ μ”μ²­ κ²½λ΅μ— λ”°λΌμ„ μ¶”κ°€ν•κ±°λ‚ μ μ™Έν•κΈ° μ‰½κ² λμ–΄ μκΈ° λ•λ¬Έμ—, μ΄λ¬ν• μ„¤μ •μ„ μ‚¬μ©ν•΄μ„ μ¤λ¥ νμ΄μ§€ κ²½λ΅λ¥Ό **excludePathPatterns** λ¥Ό μ‚¬μ©ν•΄μ„ λΉΌμ£Όλ©΄ λλ‹¤.

<br/>

<br/>

#### π μ „μ²΄ νλ¦„ μ •λ¦¬

##### /hello μ •μƒ μ”μ²­

> WAS(/hello, dispatchType=REQUEST) -> ν•„ν„° -> μ„λΈ”λ¦Ώ -> μΈν„°μ…‰ν„° -> μ»¨νΈλ΅¤λ¬ -> View

<br/>

##### /error-ex μ¤λ¥ μ”μ²­

- ν•„ν„°λ” setDispatcherTypesλ΅ μ¤‘λ³µ νΈμ¶ μ κ±° (dispatchType=REQUEST)
- μΈν„°μ…‰ν„°λ” κ²½λ΅ μ •λ³΄λ΅ μ¤‘λ³µ νΈμ¶ μ κ±° (excludePathPatterns)

<br/>

1. ##### WAS(/error-ex, dispatchType=REQUEST) -> ν•„ν„° -> μ„λΈ”λ¦Ώ -> μΈν„°μ…‰ν„° -> μ»¨νΈλ΅¤λ¬
2. ##### WAS(μ—¬κΈ°κΉμ§€ μ „ν) <- ν•„ν„° <- μ„λΈ”λ¦Ώ <- μΈν„°μ…‰ν„° <- μ»¨νΈλ΅¤λ¬(μμ™Έλ°μƒ)
3. ##### WAS μ¤λ¥ νμ΄μ§€ ν™•μΈ
4. ##### WAS(/error-page/500, dispatchType=ERROR) -> ν•„ν„°(x) -> μ„λΈ”λ¦Ώ -> μΈν„°μ…‰ν„°(x) -> μ»¨νΈλ΅¤λ¬(/error-page/500) -> View

