---
title:  "스프링 MVC 공부하기[2]"
excerpt: "서블릿 코드로 살짝 맛보기"
date:   2021-09-20 06:18:00 +0900
header:
  teaser: /assets/images/spring.png

categories: javaSpring
tags:
  - Java
  - Spring
  - MVC
last_modified_at: 2021-09-20T06:18:00-05:00


---

<br/>

<br/>

💡 내가 듣는 강의 - [스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1)

요기서는 정말 기초!!! HelloWorld 하는 느낌으로다가

Hello 서블릿을 한번 해볼게용 ㅎ

<br/>

<br/>

## 💻 사전 준비

##### [https://start.spring.io/](https://start.spring.io/)로 이동해서 다음과 같이 설정해주세용.

![image-20210921183717549](https://raw.githubusercontent.com/ShinDongHun1/image_repo/main/img/image-20210921183717549.png)

##### Packaging은 Jar가 아니라 War를 선택해주세용!  JSP를 실행하기 위해서 필요해요 :D

<br/>

<br/>

#### 💻Settings -> build Tools -> Gradle에서 Build and run usiing과 그 아래거를 모두 IntelliJ IDEA로 설정.

<br/>

#### 💻Lombok 사용법!

##### Annotaion processors 로 이동해서 Enable annotaion processing 선택!

<br/>

#### 💻API를 사용하기 위해

[포스트맨 설치](https://www.postman.com/downloads/)

##### <br/>

<br/>

### 💻 ServletApplication.java

<div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">@ServletComponentScan&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//현재&nbsp;패키지를&nbsp;포함한&nbsp;하위&nbsp;패키지를&nbsp;모두&nbsp;뒤져서&nbsp;Servlet을&nbsp;찾아서&nbsp;등록함.&nbsp;=&gt;&nbsp;서블릿&nbsp;자동&nbsp;등록</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">@SpringBootApplication</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">public</span>&nbsp;<span style="color:#ff3399">class</span>&nbsp;ServletApplication&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">public</span>&nbsp;<span style="color:#ff3399">static</span>&nbsp;<span style="color:#ff3399">void</span>&nbsp;main(<span style="color:#4be6fa">String</span>[]&nbsp;args)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpringApplication.run(ServletApplication.<span style="color:#ff3399">class</span>,&nbsp;args);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

##### 다음과 같이 @ServletComponetScan을 붙여주세요!

#### 💡 @ServletComponentScan

##### 현재 패키지를 포함한 하위 패키지를 모두 뒤져서 Servlet을 찾아서 자동으로 등록해줘요!<br/>(ComponentScan이랑 비슷하죠?)

<br/>

### 💻 ServletApplication.java

<div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">@WebServlet(name&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"helloServlet"</span>,&nbsp;urlPatterns&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"/hello"</span>)&nbsp;<span style="color:#999999">//&nbsp;name은&nbsp;아무렇게나&nbsp;지어도&nbsp;된다,&nbsp;/hello로&nbsp;들어오면&nbsp;아래&nbsp;서블릿이&nbsp;실행된다</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">public</span>&nbsp;<span style="color:#ff3399">class</span>&nbsp;HelloServlet&nbsp;<span style="color:#ff3399">extends</span>&nbsp;HttpServlet&nbsp;{&nbsp;<span style="color:#999999">//서블릿은&nbsp;HttpServlet을&nbsp;상속받아야&nbsp;한다</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//중요,&nbsp;ctrl&nbsp;+&nbsp;o&nbsp;누르고&nbsp;service를&nbsp;친&nbsp;후&nbsp;자물쇠가&nbsp;잠겨있는&nbsp;service를&nbsp;클릭하면&nbsp;자동&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;@Override<span style="color:#999999">//서블릿이&nbsp;호출되면&nbsp;아래&nbsp;메소드가&nbsp;실행된다</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">protected</span>&nbsp;<span style="color:#ff3399">void</span>&nbsp;service(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response)&nbsp;<span style="color:#ff3399">throws</span>&nbsp;ServletException,&nbsp;IOException&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">System</span>.<span style="color:#4be6fa">out</span>.<span style="color:#4be6fa">println</span>(<span style="color:#ffd500">"HelloServlet.service"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

####  우선 서블릿은 <span style="color:orange">HttpServlet을 상속</span>받으셔야 하구요!

#### <span style="color:orange">@WebServlet</span>을 붙여주세요!

#####  name은 아무렇게나 지어두셔두 상관없어요!, 여기에 <span style="color:orange">지정한 url</span>로 들어오게 되면 아래 서블릿이 실행되는데요!

#####  (메소드 편하게 overrride하는 TIP :

#####  ctrl + o 를 누르고 service를 검색해 주시면 두개의 메소드가 나올텐데, 자물쇠가 잠겨있는 메소드를 선택하시면 됩니당! 접근자가 protected인지 확인해주세요!)

<br/>

위와같이 작성한 후**💻 ServletApplication.java**를 실행시켜 서버를 실행시켜주시고<br/>[http://localhost:8080/hello](http://localhost:8080/hello) 를 입력하시고 이동해주시면 됩니당! 

##### 아무것도 없는 빈 화면이 나오면 잘된거예요!(콘솔창에는 HelloServlet.service가 뜰거구용!)

<br/>

#### ✏HttpServletRequest request: 

##### http요청이 오면 WAS가 HttpServletRequest 객체를 만들어서 서블릿에 던져줍니다! <br/>저희가 url로 들어오게 되면, 웹브라우저가 http요청 메세지를 만들어서 서버에 던져주는데요! <br/>그때 그 메시지가 담겨있는게 request입니당 ㅎㅎ

<br/>

#### ✏HttpServletResponse  **response**: 

##### 브라우저의 요청에 대한 응답을 담고 있어요! 

<br/>

### 💻 ServletApplication.java

<div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">@WebServlet(name&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"helloServlet"</span>,&nbsp;urlPatterns&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"/hello"</span>)&nbsp;<span style="color:#999999">//&nbsp;name은&nbsp;아무렇게나&nbsp;지어도&nbsp;된다,&nbsp;/hello로&nbsp;들어오면&nbsp;아래&nbsp;서블릿이&nbsp;실행된다</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">public</span>&nbsp;<span style="color:#ff3399">class</span>&nbsp;HelloServlet&nbsp;<span style="color:#ff3399">extends</span>&nbsp;HttpServlet&nbsp;{&nbsp;<span style="color:#999999">//서블릿은&nbsp;HttpServlet을&nbsp;상속받아야&nbsp;한다</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//중요,&nbsp;ctrl&nbsp;+&nbsp;o&nbsp;누르고&nbsp;service를&nbsp;친&nbsp;후&nbsp;자물쇠가&nbsp;잠겨있는&nbsp;service를&nbsp;클릭하면&nbsp;자동&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;@Override<span style="color:#999999">//서블릿이&nbsp;호출되면&nbsp;아래&nbsp;메소드가&nbsp;실행된다</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">protected</span>&nbsp;<span style="color:#ff3399">void</span>&nbsp;service(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response)&nbsp;<span style="color:#ff3399">throws</span>&nbsp;ServletException,&nbsp;IOException&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">System</span>.<span style="color:#4be6fa">out</span>.<span style="color:#4be6fa">println</span>(<span style="color:#ffd500">"HelloServlet.service"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">System</span>.<span style="color:#4be6fa">out</span>.<span style="color:#4be6fa">println</span>(<span style="color:#ffd500">"request&nbsp;=&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;request);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">System</span>.<span style="color:#4be6fa">out</span>.<span style="color:#4be6fa">println</span>(<span style="color:#ffd500">"response&nbsp;=&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;response);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">String</span>&nbsp;username&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;request.getParameter(<span style="color:#ffd500">"username"</span>);<span style="color:#999999">//http://localhost:8080/hello?username=shin&nbsp;다음과&nbsp;같이&nbsp;실행해보자</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">System</span>.<span style="color:#4be6fa">out</span>.<span style="color:#4be6fa">println</span>(<span style="color:#ffd500">"username&nbsp;=&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;username);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setContentType(<span style="color:#ffd500">"text/plain"</span>);&nbsp;<span style="color:#999999">//단순&nbsp;문자&nbsp;&nbsp;&nbsp;,&nbsp;header&nbsp;정보의&nbsp;ContentType에&nbsp;들어간다</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setCharacterEncoding(<span style="color:#ffd500">"utf-8"</span>);<span style="color:#999999">//&nbsp;header&nbsp;정보의&nbsp;ContentType에&nbsp;들어간다</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.getWriter().write(<span style="color:#ffd500">"hello"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;username);<span style="color:#999999">//http&nbsp;메tl지&nbsp;바디에&nbsp;메세지가&nbsp;들어간다</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

다음과 같이 추가해주시고 실행시켜주세요!<br/>주석 한번씩 읽어보시고!

[http://localhost:8080/hello?username=shin](http://localhost:8080/hello?username=shin)<br/>위처럼 username=(아무이름) 하고 이동해주세요!

> **HelloServlet.service**
>
> **request = org.apache.catalina.connector.RequestFacade@393fef6b**
>
> **response = org.apache.catalina.connector.ResponseFacade@daa9ccb**
>
> **username = shin**

다음처럼 결과가 잘 나오실거예요! 대충 어떻게 작동되는지 감이 잡히시나용?

결과 화면은

![image-20210921183750739](https://raw.githubusercontent.com/ShinDongHun1/image_repo/main/img/image-20210921183750739.png)

##### F12 눌러서 확인해보시면 Response Headers에 Content-Type 보시면 저희가 지정해준 text/plain;charset=utf-8이 잘 설정되어 있는거 보이시죠???? 

##### 화면에는 helloshin이라고 잘 나오네요 :D

그리고 저기 나머지 설정들은 저희가 안 했자나요??? 서블릿이 다 해준거랍니다 !

<br/>

<br/>

### ✏로그 출력하기

#### main 폴더 -> resources -> application.properties로 이동해주세여 

아무것도 안 써있을건데여!

```
logging.level.org.apache.coyote.http11=debug
```

이거를 추가해줍시당!

서버를 재실행 해주시고 다시 아까처럼 요청해볼게용

![image-20210921183814359](https://raw.githubusercontent.com/ShinDongHun1/image_repo/main/img/image-20210921183814359.png)

이렇게 잘 나오는것을 볼 수 있습니다!

<br/>

<br/>

## 🧾 정리

- ### <span style="color:orange"> @ServletComponentScan</span> 을 달아주자!


- ### 서블릿은 <span style="color:orange">HttpServlet을 상속</span>받아야 한다!


- ### 서블릿에는 <span style="color:orange">@WebServlet</span>을 붙여주자!

- ### HttpServletRequest 에는 <span style="color:orange">요청에 대한 정보</span>가 들어있고

- ### HttpServletResponse 에는 <span style="color:orange">요청에 대한 응답</span>이 들어있다!




틀린 정보가 있으면 수정하겠습니다 :D

