---
title:  "Query DSL 기본 문법 -1 "
excerpt: "Query DSL 기본문법"
date:   2021-10-07 09:09:00 +0900
header:
  teaser: /assets/images/spring.png

categories: javaSpring
tags:
  - Java
  - Spring
  - Query DSL
last_modified_at: 2021-10-07T09:09:00-05:00




---



<br/>

## <br/>💡 기본 문법

<br/>

### 💡 JPQL vs QueryDSL

<br/>

#### 하나의 member 찾기

#### ✏ JPQL

<script src="https://gist.github.com/ShinDongHun1/2f0cc411b60ffdd45c61702fdc175af3.js"></script>

#### ✏ QueryDSL

<script src="https://gist.github.com/ShinDongHun1/5a785453e3e8488308575c30a169c69d.js"></script>

<br/>

### 💡 기본  Q-Type

##### Q클래스 인스턴스를 사용하는 2가지 방법

- ##### QMember qMember = new QMember("m"); //별칭 직접 지정

- ##### QMember qMember = QMember.member; //기본 인스턴스 사용

<br/><br/>

### 💡 검색 조건

- ##### member.username.eq("member1") // username = 'member1'

- ##### member.username.ne("member1") //username != 'member1'

- ##### member.username.eq("member1").not() // username != 'member1'

- ##### member.username.isNotNull() //이름이 is not null



- ##### member.age.in(10, 20) // age in (10,20)

- ##### member.age.notIn(10, 20) // age not in (10, 20)

- ##### member.age.between(10,30) //between 10, 30



- ##### member.age.goe(30) // age >= 30

- ##### member.age.gt(30) // age > 30

- ##### member.age.loe(30) // age <= 30

- ##### member.age.lt(30) // age < 30



- ##### member.username.like("member%") //like 검색

- ##### member.username.contains("member") // like ‘%member%’ 검색

- ##### member.username.startsWith("member") //like ‘member%’ 검색

<br/><br/>

## 💡 결과 조회

- ##### fetch() : 리스트 조회, 데이터 없으면 빈 리스트 반환

- ##### fetchOne() : 단 건 조회

- ##### 결과가 없으면 : null

- ##### 결과가 둘 이상이면 : com.querydsl.core.NonUniqueResultException

- ##### fetchFirst() : limit(1).fetchOne()

- ##### fetchResults() : 페이징 정보 포함, total count 쿼리 추가 실행

- ##### fetchCount() : count 쿼리로 변경해서 count 수 조회

<br/><br/>

## 💡 정렬

<script src="https://gist.github.com/ShinDongHun1/51891178a08b99b178cb751d96b62ced.js"></script>

<br/><br/>

## 💡 페이징

<script src="https://gist.github.com/ShinDongHun1/bdcbe97a91cf4e0656ce4e4fff0b01ac.js"></script>

<script src="https://gist.github.com/ShinDongHun1/723b51ab02c6c17d1d0520e3cb8debc4.js"></script>

<br/><br/>

## 💡 집합

<script src="https://gist.github.com/ShinDongHun1/173ab0a6e752d3c8191bca2b56db0f13.js"></script>

### +group by

<script src="https://gist.github.com/ShinDongHun1/ba57156dd918322a41b4ccfa8b6ff9a7.js"></script>

<br/><br/>

## 💡 조인

### 기본

- ####   join(조인 대상, 별칭으로 사용할 Q타입)

<script src="https://gist.github.com/ShinDongHun1/7583673fff031d0155aebf7061ae47e5.js"></script>

<br/>

### 세타조인

<script src="https://gist.github.com/ShinDongHun1/5a1328410e9f14fc249091126d5aa9c5.js"></script>

<br/>

### 조인 on

<script src="https://gist.github.com/ShinDongHun1/44945d70869b15c47ea301b9c8944c33.js"></script>

#### 결과

tuple = [Member(id=3, username=member1, age=10), Team(id=1, name=TeamA)]
tuple = [Member(id=4, username=member2, age=20), Team(id=1, name=TeamA)]
tuple = [Member(id=5, username=member3, age=30), null]
tuple = [Member(id=6, username=member4, age=40), null]

<br/>

### 연관관계 없는 엔티티 외부 조인

<script src="https://gist.github.com/ShinDongHun1/c307d7df3f35fd615b97b868cf56b238.js"></script>

tuple = [Member(id=3, username=member1, age=10), null]
tuple = [Member(id=4, username=member2, age=20), null]
tuple = [Member(id=5, username=member3, age=30), null]
tuple = [Member(id=6, username=member4, age=40), null]
tuple = [Member(id=7, username=TeamA, age=0), Team(id=1, name=TeamA)]
tuple = [Member(id=8, username=TeamB, age=0), Team(id=2, name=TeamB)]
tuple = [Member(id=9, username=TeamC, age=0), null]

<br/>

### 페치 조인

<script src="https://gist.github.com/ShinDongHun1/cf847a35577bca958bbfe8513955581e.js"></script>