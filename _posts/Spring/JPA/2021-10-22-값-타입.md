---
title:  "ê°’ íƒ€ì…ê³¼ ì„ë² ë””ë“œ íƒ€ì…"
excerpt: "ì„ë² ë“œë”” íƒ€ì…"
date:   2021-10-22 22:07:00
header:
  teaser: /assets/images/spring.png

categories: JPA
tags:
  - Java
  - Spring
  - JPA
  - ì„ë² ë””ë“œ íƒ€ì…
last_modified_at: 2021-10-22T22:07:00

---

<br/>

## ğŸ’¡ JPAì˜ ë°ì´í„° íƒ€ì… ë¶„ë¥˜

##### JPAëŠ” ë°ì´í„° íƒ€ì…ì„ ìµœìƒìœ„ ë‹¨ê³„ë¡œ ë³´ì•˜ì„ ë•Œ ì—”í‹°í‹° íƒ€ì…ê³¼, ê°’ íƒ€ì… ë‘ê°€ì§€ë¡œ ë¶„ë¥˜í•œë‹¤.

<br/>

### ì—”í‹°í‹° íƒ€ì…

- ##### @Entityë¡œ ì •ì˜í•˜ëŠ” ê°ì²´

- ##### ë°ì´í„°ê°€ ë³€í•´ë„ ì‹ë³„ìë¡œ ê³„ì† ì¶”ì ì´ ê°€ëŠ¥(ì‹ë³„ìëŠ” ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ)

<br/>

### ê°’ íƒ€ì…

- int, Integer, String ì²˜ëŸ¼ ë‹¨ìˆœíˆ ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìë°” ê¸°ë³¸ íƒ€ì…ì´ë‚˜ ê°ì²´
- ì‹ë³„ìê°€ ì—†ê³  ê°’ë§Œ ìˆìœ¼ë¯€ë¡œ ë³€ê²½ì‹œ ì¶”ì ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤

<br/>

<br/>

## ğŸ’¡ ê°’ íƒ€ì…ì˜ ë¶„ë¥˜

##### ê°’ íƒ€ì…ì€ í¬ê²Œ ê¸°ë³¸ê°’ íƒ€ì…, ì„ë² ë””ë“œ íƒ€ì…, ì»¬ë ‰ì…˜ ê°’ íƒ€ì… 3ê°€ì§€ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.

#### ê¸°ë³¸ê°’ íƒ€ì…

- ìë°” ê¸°ë³¸ íƒ€ì…(int, double)
- ë˜í¼ í´ë˜ìŠ¤(Integer, Long)
- String

#### ì„ë² ë””ë“œ íƒ€ì…(embedded type, ë³µí•© ê°’ íƒ€ì…)

#### ì»¬ë ‰ì…˜ ê°’ íƒ€ì…(collection value type)

<br/>

<br/>

## ğŸ’¡ ê¸°ë³¸ ê°’ íƒ€ì…

##### ìƒëª…ì£¼ê¸°ë¥¼ ì—”í‹°í‹°ì— ì˜ì¡´í•œë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´ íšŒì› ì—”í‹°í‹°ê°€ ìˆìœ¼ë©´, íšŒì›ì„ ì‚­ì œí•˜ëŠ” ìˆœê°„ String(name)ê³¼ int(age)ì™€ ê°™ì€ í•„ë“œì˜ ê°’ë“¤ë„ ì‚­ì œê°€ ëœë‹¤.

##### <span style="color:red">ê°’ íƒ€ì…ì€ ì ˆëŒ€ë¡œ ê³µìœ í•˜ë©´ ì•ˆëœë‹¤.</span>

- ì˜ˆë¥¼ ë“¤ì–´ íšŒì› ì´ë¦„ì„ ë³€ê²½í•˜ì˜€ì„ ë•Œ ë‹¤ë¥¸ íšŒì›ì˜ ì´ë¦„ë„ í•¨ê»˜ ë³€ê²½ë˜ë©´ ì•ˆëœë‹¤.

<br/>

<br/>

## ğŸ’¡ ì„ë² ë””ë“œ íƒ€ì…(ë³µí•© ê°’ íƒ€ì…)

##### ì„ë² ë””ë“œ íƒ€ì…ì´ë¼ëŠ” ê²ƒì€(ë²ˆì—­í•˜ë©´ ë‚´ì¥ íƒ€ì…ì´ë¼ê³ ë„ ë¶ˆë¦¼) ìƒˆë¡œìš´ ê°’ íƒ€ì…ì„ ì§ì ‘ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

##### JPAëŠ” ì„ë² ë””ë“œ íƒ€ì…(embedded type)ì´ë¼ê³  í•˜ë©°, ì£¼ë¡œ ê¸°ë³¸ ê°’ íƒ€ì…ì„ ëª¨ì•„ì„œ ë§Œë“¤ê¸° ë•Œë¬¸ì— ë³µí•© ê°’ íƒ€ì…ì´ë¼ê³ ë„ í•œë‹¤.

##### ì¤‘ìš”í•œ ì ì€ ì„ë² ë””ë“œ íƒ€ì…ë„ int, Stringê³¼ ê°™ì€ ê°’ íƒ€ì…ì´ë€ ê²ƒì´ë‹¤.

<br/>

#### ì˜ˆë¥¼ ë“¤ì–´ë³´ì

##### íšŒì› ì—”í‹°í‹°ëŠ” ì´ë¦„, ê·¼ë¬´ ì‹œì‘ì¼, ê·¼ë¬´ ì¢…ë£Œì¼, ì£¼ì†Œ(ë„ì‹œ, ë²ˆì§€, ìš°í¸ë²ˆí˜¸)ë¥¼ ê°€ì§„ë‹¤.

- ì‹œì‘ì¼ ì¢…ë£Œì¼ì´ ë¹„ìŠ·í•´ ë³´ì¸ë‹¤ => workPeriodë¡œ ë¬¶ì

- ë„ì‹œ, ë²ˆì§€, ìš°í¸ë²ˆí˜¸ë¥¼ ë¬¶ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒë§Œ ê°™ë‹¤. => homeAddressë¡œ ë¬¶ì

##### Member

```java
@Entity
public class Member {
	@Id @GenerateValue
    private Long id;
    
    private String name;
    
    private Period workPeriod;
    
    private Address homeAddress;
}
```

<br/>

##### Period

```java
public class Period {

    private LocalDateTime startDate;
    
    private LocalDateTime endDate;
    
}
```

<br/>

##### Address

```java
public class Address {

    private String city;
    
    private String street;
    
    private String zipcode;
    
}
```

<br/>

### ì„ë² ë””ë“œ íƒ€ì… ì‚¬ìš©ë²•

##### @Embeddable : ê°’ íƒ€ì…ì„ ì •ì˜í•˜ëŠ” ê³³ì— í‘œì‹œ

##### @Embedded : ê°’ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê³³ì— í‘œì‹œ

##### ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜

<br/>

<br/>

### ì„ë² ë””ë“œ íƒ€ì… ì¥ì 

- ##### ì¬ì‚¬ìš© ê°€ëŠ¥

- ##### ë†’ì€ ì‘ì§‘ë„

- ##### Period.isWork() ì²˜ëŸ¼ í•´ë‹¹ ê°’ íƒ€ì…ë§Œ ì‚¬ìš©í•˜ëŠ” ì˜ë¯¸ ìˆëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

- ##### ì„ë² ë””ë“œ íƒ€ì…ì„ í¬í•¨í•œ ëª¨ë“  ê°’ íƒ€ì…ì€, ê°’ íƒ€ì…ì„ ì†Œìœ í•œ ì—”í‹°í‹°ì— ìƒëª…ì£¼ê¸°ë¥¼ ì˜ì¡´í•¨

<br/>

<br/>

#### ì„ë² ë””ë“œ íƒ€ì…ì—ì„œ ì¤‘ìš”í•œ ê²ƒì€, ê°ì²´ê°€ ì„ë² ë””ë“œ íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤ê³  í•´ë„ í…Œì´ë¸”ì€ ì•„ë¬´ëŸ° ë³€ê²½ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.

<br/>

<br/>

### @Inheritance, @MappedSuperclass, @Embeddable ???

- ##### @Inheritance : ìƒì†ê´€ê³„ë¥¼ ë§¤í•‘í• ë•Œ ì‚¬ìš©í•˜ë©°, êµ¬í˜„ ì „ëµì— ë”°ë¼ í…Œì´ë¸”ì´ ë°”ë€ë‹¤.

- ##### @MappedSuperclass : ê³µí†µ ë§¤í•‘ ì •ë³´ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì—”í‹°í‹°ì˜ ê³µí†µë˜ëŠ” ì†ì„±ë“¤ì„ ìƒì†ì„ ë°›ì•„ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤. ì¦‰ í…Œì´ë¸”ì€ ë³€í•¨ì´ ì—†ìœ¼ë‚˜, ê·€ì°®ìŒì„ í•´ì†Œí•˜ê¸° ìœ„í•œ ë°©ë²•

- ##### @Embeddable : ìƒì†ê³¼ ì „í˜€ ê´€ë ¨ì´ ì—†ë‹¤. @MappedSuperclassì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, @MappedSuperclassëŠ” ìƒì†ì„ ë°›ì•„ ì‚¬ìš©í•˜ëŠ”ê±°ê³ , @Embeddableì€ ìƒˆë¡œìš´ ê°’ íƒ€ì…ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\

ì˜ˆë¥¼ ë“¤ì–´ Address í´ë˜ìŠ¤(í•„ë“œë¡œëŠ” streetì™€ zipcodeê°€ ìˆë‹¤ê³  í•˜ì)ë¥¼ ë§Œë“¤ì–´ ì´ë¥¼ ìƒì†ë°›ì•„ ì‚¬ìš©í•˜ëŠ” HomeAddressì™€, CompanyAddressê°€ ìˆê³ , í•„ë“œë¡œ Address(private Address address)ë¥¼ ê°€ì§€ëŠ” Memberê°€ ìˆë‹¤ê³  í–ˆì„ ë•Œ

HomeAddressì™€ CompanyAddressëŠ” extends Addressë¥¼ í•˜ê¸° ë•Œë¬¸ì— @Inheritanceë¥¼ í•´ì•¼í•˜ê³ , 

MemberëŠ” ìƒì†ë°›ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•„ë“œë¡œì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— @Embeddedë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

#### ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ @MappedSuperclassì™€ ì„ë² ë””ë“œ íƒ€ì…ì€ ìƒì†ê³¼ ìœ„ì„ì˜ ì°¨ì´ì´ë‹¤.

<br/>

<br/>

### @MappedSuperclassì™€ ì„ë² ë””ë“œ íƒ€ì…ì„ ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

[https://www.inflearn.com/questions/18578](https://www.inflearn.com/questions/18578)

[https://www.inflearn.com/questions/145049](https://www.inflearn.com/questions/145049)

<br/>

### ì„ë² ë””ë“œ íƒ€ì…ê³¼ ì—°ê´€ê´€ê³„

ì„ë² ë””ë“œ íƒ€ì…ì€ ì…ë² ë””ë“œ íƒ€ì…ì„ í•„ë“œë¡œ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°

##### <span style="color:orange"> ì—”í‹°í‹°ë„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤</span>

![image-20211022222814127](https://raw.githubusercontent.com/ShinDongHun1/image_repo/main/img/image-20211022222814127.png)

##### ìœ„ì˜ ì˜ˆì‹œì—ì„œ MemberëŠ” Addressì™€ PhoneNumberë€ ì„ë² ë””ë“œ íƒ€ì…ì„ í•„ë“œë¡œ ê°€ì§€ë©°,

- ##### AddressëŠ” í•„ë“œë¡œ Zipcodeë€ ì„ë² ë””ë“œ íƒ€ì…ì„ ê°€ì§„ë‹¤.

- ##### PhoneNumberëŠ” í•„ë“œë¡œ PhoneEntityë€ ì—”í‹°í‹°ë¥¼ ê°€ì§„ë‹¤.

<br/>

<br/>

### @AttributeOverride

##### í•œ ì—”í‹°í‹°ì—ì„œ ê°™ì€ ì„ë² ë””ë“œ íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

##### =>ì»¬ëŸ¼ ëª…ì´ ì¤‘ë³µë˜ì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

#### ì´ëŸ´ë•Œ @AttributeOverrides, @AttributeOverrideë¥¼ ì‚¬ìš©í•´ì„œ ì»¬ëŸ¬ ëª… ì†ì„±ì„ ì¬ì •ì˜ í•  ìˆ˜ ìˆë‹¤

```java
@Embeddable
public class Address {
	private String zipCode;
	private String address;
}
```



```java
@Embedded
@AttributeOverride(name = "zipCode", column = @Column(name = "home_zipCode"))
@AttributeOverride(name = "address", column = @Column(name = "home_address1"))
private Address homeAddress;


@Embedded
@AttributeOverrides({
    @AttributeOverride(name = "zipCode", column = @Column(name = "company_zipCode")),
@AttributeOverride(name = "address", column = @Column(name = "company_address1"))
})
private Address companyAddress;

```

<br/>

<br/>

<br/>

## ğŸ’¡ ê°’ íƒ€ì…ê³¼ ë¶ˆë³€ ê°ì²´

##### ì„ë² ë””ë“œ íƒ€ì… ê°™ì€ ê°’ íƒ€ì…ì€ ì—¬ëŸ¬ ì—”í‹°í‹°ì—ì„œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤.

![image-20211022223929730](https://raw.githubusercontent.com/ShinDongHun1/image_repo/main/img/image-20211022223929730.png)

##### ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œ OldCityë¥¼ NewCityë¡œ ë³€ê²½í•˜ë©´ íšŒì›1ê³¼ íšŒì›2ì˜ cityê°€ ëª¨ë‘ ë°”ë€ë‹¤.

##### ê°’ íƒ€ì…ì˜ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ì¸ ê°’ì„ ê³µìœ í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•˜ê³ , ë”°ë¼ì„œ ê°’(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

##### ê·¸ëŸ¬ë‚˜ ì„ë² ë””ë“œ íƒ€ì…ì€ ìë°”ì˜ ê°ì²´ íƒ€ì…ì´ë¯€ë¡œ, ì°¸ì¡° ê°’ì„ ì§ì ‘ ëŒ€ì…í•˜ëŠ” ê²ƒì„ ë§‰ì„ ë°©ë²•ì´ ì—†ë‹¤.(ì¦‰ ê°œë°œìê°€ ì‹¤ìˆ˜ë¡œ ê°’ì„ ë³µì‚¬í•˜ì§€ ì•Šê³ , ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ì˜ ê°’ì„ ëŒ€ì…í•˜ëŠ” ê²ƒì„ ë§‰ì„ ë°©ë²•ì´ ì—†ë‹¤)

<br/>

### í•´ê²°ë°©ì•ˆ

#### ë¶ˆë³€ ê°ì²´

- ##### ê°ì²´ íƒ€ì…ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ê²Œ ë§Œë“¤ë©´ ë¶€ì‘ìš©ì˜ ì›ì²œì„ ì°¨ë‹¨í•  ìˆ˜ ìˆë‹¤.

- ##### <span style="color:orange">ê°’ íƒ€ì…ì€ ë¶ˆë³€ ê°ì²´(immutable object)ë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤</span>

- ##### ë¶ˆë³€ ê°ì²´ : ìƒì„± ì‹œì  ì´í›„ ì ˆëŒ€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ê°ì²´

- ##### <span style="color:orange">ë°©ë²• : ìƒì„±ìë¡œë§Œ ê°’ì„ ì„¤ì •í•˜ê³  ìˆ˜ì •ì(Setter)ë¥¼ ë§Œë“¤ì§€ ì•Šìœ¼ë©´ ëœë‹¤.</span>

- ##### Integer, Stringì€ ìë°”ê°€ ì œê³µí•˜ëŠ” ëŒ€í‘œì ì¸ ë¶ˆë³€ ê°ì²´ì´ë‹¤

ê·¸ëŸ¼ ê°’ì„ ë°”ê¾¸ê³  ì‹¶ì„ ë•ŒëŠ”??? new ë¥¼ ì´ìš©í•´ì„œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë„£ì–´ì£¼ë©´ ëœë‹¤!

<br/>

<br/>

### ğŸ“” Reference

[ì¸í”„ëŸ° - ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°](https://www.inflearn.com/course/ORM-JPA-Basic/dashboard)

[@MappedSuperclassì™€ ì„ë² ë””ë“œ íƒ€ì…ì˜ ì°¨ì´ - https://www.inflearn.com/questions/18578](https://www.inflearn.com/questions/18578)

[@MappedSuperclassì™€ ì„ë² ë””ë“œ íƒ€ì…ì˜ ì°¨ì´ - https://www.inflearn.com/questions/145049](https://www.inflearn.com/questions/145049)

[@AttributeOverride ì‚¬ìš©ë²• - https://galid1.tistory.com/592](https://galid1.tistory.com/592)

