---
title:  "Auditing"
excerpt: "Auditing ì‚¬ìš©í•˜ê¸°"
date:   2021-10-26 08:28:00
header:
  teaser: /assets/images/spring.png

categories: DATA
tags:
  - Java
  - Spring
  - JPA
  - DATA JPA
last_modified_at: 2021-10-26T08:28:00



---

<br/>

## ğŸ’¡ Auditing

##### ì—”í‹°í‹°ë¥¼ ìƒì„±, ë³€ê²½í•  ë•Œ ë³€ê²½í•œ ì‚¬ëŒê³¼ ì‹œê°„ì„ ì¶”ì í•˜ê³  ì‹¶ìœ¼ë©´?

##### <br/>

##### ğŸ¹ JPAì§ì ‘ ì‚¬ìš©

```java
@MappedSuperclass
public class JpaBaseEntity {
    
	@Column(updatable = false)
	private LocalDateTime createdDate;
	private LocalDateTime updatedDate;
	
	@PrePersist  //persistì „ì— ì´ë²¤íŠ¸ ë°œìƒ
	public void prePersist(){
		LocalDateTime now = LocalDateTime.now();
		createdDate=now;
		updatedDate=now;
	}
	
	@PreUpdate//updateì „ì— ì´ë²¤íŠ¸ ë°œìƒ
	public void prePersist(){
		updatedDate = LocalDateTime.now();
	}
	
}
```

<br/>

##### í•´ë‹¹ JpaBaseEntityë¥¼ ìƒì†ë°›ì•„ ì‚¬ìš©í•˜ë©´ ëœë‹¤!

<br/>

<br/>

## ğŸ’¡ ìŠ¤í”„ë§ ë°ì´í„° JPA ì‚¬ìš©

#### ğŸ¹ ì„¤ì •

- ##### @EnableJpaAuditing -> ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • í´ë˜ìŠ¤ì— ì ìš©í•´ì•¼í•¨

- ##### @EntityListeners(AuditingEntityListener.class) -> ì—”í‹°í‹°ì— ì ìš©

<br/>

```java
@EnableJpaAuditing
@SpringBootApplication
public class JpashopApplication {

   public static void main(String[] args) {
      SpringApplication.run(JpashopApplication.class, args);
   }
    
    @Bean
    public AuditorAware<String> auditorProvider() {
        //ì‹œíë¦¬í‹° ë“± ì‚¬ìš© ì‹œ ì„¸ì…˜ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ì•„ì´ë””ë¥¼ êº¼ë‚´ì˜¤ê±°ë‚˜ í•´ì•¼ í•˜ì§€ë§Œ, ì˜ˆì œì´ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ UUID ì‚¬ìš©
        return () -> Optional.of(UUID.randomUUID().toString());
    }
}
```

<br/>

```java
@EntityListeners(AuditingEntityListener.class)
@MappedSuperclass
@Getter
public class BaseEntity {
    
    @CreatedDate
	@Column(updatable = false)
	private LocalDateTime createdDate;
    
    @LastModifiedDate
	private LocalDateTime lastModifiedDate;
    
    
    @CreateBy
    @Column(updatable = false)
    private String createdBy;
    
    @LastModifiedBy
    private StringlastModifiedBy;
}
```

<br/>

<br/>

### ğŸ“” Reference

[ì¸í”„ëŸ° - ì‹¤ì „! ìŠ¤í”„ë§ ë°ì´í„° JPA](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-JPA-%EC%8B%A4%EC%A0%84/dashboard)

